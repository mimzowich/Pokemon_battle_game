<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pokemon Battle</title>
</head>
<body>
    <h1>Pokemon Battle</h1>
    <label for="pokemon1">Choose your Pokemon: </label>
    <select id="pokemon1">
        <option value="Fire">Charmander (Fire)</option>
        <option value="Water">Squirtle (Water)</option>
        <option value="Grass">Bulbasaur (Grass)</option>
        <option value="Fighting">Hitmonchan (Fighting)</option>
        <option value="Normal">Snorlax (Normal)</option>
        <option value="Ghost">Haunter (Ghost)</option>
    </select>
    <img id="pokemon1Image" src="images/charmander.png" alt="Pokemon 1" width="100">
    <br>
    <label for="pokemon2">Choose opponent's Pokemon: </label>
    <select id="pokemon2">
        <option value="Fire">Charmander (Fire)</option>
        <option value="Water">Squirtle (Water)</option>
        <option value="Grass">Bulbasaur (Grass)</option>
        <option value="Fighting">Hitmonchan (Fighting)</option>
        <option value="Normal">Snorlax (Normal)</option>
        <option value="Ghost">Haunter (Ghost)</option>
    </select>
    <img id="pokemon2Image" src="images/charmander.png" alt="Pokemon 2" width="100">
    <br>
    <button onclick="getWinner()">Battle!</button>
    <p id="result"></p>

    <script>
        function getWinner() {
            const pokemon1 = document.getElementById('pokemon1').value;
            const pokemon2 = document.getElementById('pokemon2').value;
            fetch(`http://localhost:3000/battle?pokemon1=${pokemon1}&pokemon2=${pokemon2}`)
                .then(response => response.text())
                .then(result => {
                    document.getElementById('result').innerText = result;
                })
                .catch(error => console.log('Error:', error));
        }
        
        document.getElementById('pokemon1').addEventListener('change', function() {
            document.getElementById('pokemon1Image').src = "images/" + this.options[this.selectedIndex].text.split(" ")[0].toLowerCase() + ".png";
        });
        
        document.getElementById('pokemon2').addEventListener('change', function() {
            document.getElementById('pokemon2Image').src = "images/" + this.options[this.selectedIndex].text.split(" ")[0].toLowerCase() + ".png";
        });
    </script>
</body>
</html>
